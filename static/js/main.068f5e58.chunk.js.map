{"version":3,"sources":["components/DashboardGamesList.js","services/db.js","services/game.js","components/Dashboard.js","services/utils.js","components/Game.js","services/user.js","components/GameLobby.js","components/GameNew.js","components/UserNew/EmailPassword.js","components/UserNew/Google.js","components/UserNew/UserNew.js","components/Home.js","components/Navbar.js","components/PrivateRoute.js","components/App.js","serviceWorker.js","index.js"],"names":["DashboardGamesList","title","games","length","className","map","name","to","key","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","getRandomGameName","Math","round","random","getGameDocument","gameName","db","collection","where","get","then","snapshot","empty","createGame","docs","ref","a","userId","gamesCollection","values","userIds","FieldValue","arrayUnion","add","addPlayerToGame","gameDocument","data","Error","update","catch","err","console","log","addWeaponToGame","weapon","weapons","getWeaponForPlayer","includes","find","item","getWinner","players","winner","tie","some","aPlayer","bPlayer","Object","assign","deleteWeapons","delete","ties","increment","getGamesForUser","Dashboard","useState","gamesWaitingForOpponent","setGamesWaitingForOpponent","gamesWaitingForOpponentMove","setGamesWaitingForOpponentMove","gamesWaitingForYourMove","setGamesWaitingForYourMove","wins","losses","stats","setStats","useEffect","handleGameUpdates","snapshots","newGamesWaitingForOpponent","newGamesWaitingForOpponentMove","newGamesWaitingForYourMove","newStats","forEach","push","index","indexOf","splice","opponentIndex","yourIndex","areObjectsSame","objectA","objectB","keys","i","areArraysSame","arrayA","arrayB","Array","arrayASorted","slice","sort","arrayBSorted","itemA","itemB","Game","setWeapon","setWinner","gameWinner","getPlayerNamesCopy","player","join","getWeaponIcon","onClickWeaponHandler","e","currentTarget","dataset","setTimeout","type","style","flexGrow","data-name","onClick","addUser","user","usersCollection","email","document","id","userDocument","getUser","doc","signInGoogle","setPersistence","Auth","Persistence","LOCAL","provider","GoogleAuthProvider","signInWithRedirect","signInEmail","actionCodeSettings","url","process","ENVIRONMENT","handleCodeInApp","sendSignInLinkToEmail","window","localStorage","setItem","JSON","stringify","checkUserFromEmailLink","isSignInWithEmailLink","location","href","parse","getItem","signInWithEmailLink","removeItem","displayName","uid","error","Promise","resolve","setAuthListener","successHandler","onAuthStateChanged","authUser","logout","signOut","GameLobby","useParams","setGameDocument","setPlayers","redirectTo","setRedirectTo","cleanup","onSnapshot","playersPromises","all","gamePlayers","GameNew","setGameName","onSubmit","preventDefault","target","elements","value","trim","placeholder","EmailPassword","isPendingEmailLinkSent","setIsPendingEmailLinkSent","showEmailSentCopy","setShowEmailSentCopy","hasOwnProperty","toLowerCase","Google","UserNew","Home","URLSearchParams","useLocation","search","Navbar","dashboardMatch","useRouteMatch","path","strict","homeMatch","classNames","getDashboardClassNames","PrivateRoute","children","rest","render","pathname","App","isLoading","setIsLoading","setUser","result","continueUrl","history","replaceState","exact","from","Boolean","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.068f5e58.chunk.js","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction DashboardGamesList({ title, games }) {\n\tif (!games.length) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<hr/>\n\n\t\t\t<h5 className=\"card-title\">{ title }</h5>\n\t\t\t<div className=\"btn-group-vertical d-block\">\n\t\t\t\t{ games.map(name => (\n\t\t\t\t\t<Link className=\"btn btn-primary\" to={ `/game/${name}` } key={ name }>{ name }</Link>\n\t\t\t\t)) }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default DashboardGamesList;\n","import * as firebase from 'firebase/app';\nimport 'firebase/firestore';\n\nfirebase.initializeApp({\n\tapiKey: 'AIzaSyCpU5AfFhgbrjaTR8sKyB_O6h9VYGCNmDk',\n\tauthDomain: 'rock-paper-scissors-b198e.firebaseapp.com',\n\tdatabaseURL: 'https://rock-paper-scissors-b198e.firebaseio.com',\n\tprojectId: 'rock-paper-scissors-b198e',\n\tstorageBucket: 'rock-paper-scissors-b198e.appspot.com',\n\tmessagingSenderId: '530589049037',\n\tappId: '1:530589049037:web:f677fbd6b66d8483654984'\n});\n\nexport default firebase.firestore();\n","import * as firebase from 'firebase/app';\nimport db from './db';\n\n/**\n * Gets a random game name\n *\n * @returns {string}\n */\nconst getRandomGameName = () => {\n\treturn `Game_${Math.round(Math.random() * 1000)}`;\n};\n\n/**\n * Gets a document reference\n *\n * @param   {string}                                gameName\n * @returns {firebase.firestore.DocumentReference}\n */\nexport const getGameDocument = gameName => db.collection('games')\n\t.where('name', '==', gameName)\n\t.get()\n\t.then(snapshot => {\n\t\tif (snapshot.empty) {\n\t\t\treturn createGame(gameName).then(getGameDocument);\n\t\t}\n\n\t\treturn snapshot.docs[0].ref;\n\t});\n\n/**\n * Inserts a game to the games collection\n *\n * @param   {string|null}                               name\n * @param   {string|null}                               userId\n * @returns {Promise<firebase.firestore.QuerySnapshot>}\n */\nexport const createGame = async (name = null, userId = null) => {\n\tname = name || getRandomGameName();\n\tconst gamesCollection = db.collection('games');\n\n\treturn gamesCollection.where('name', '==', name)\n\t\t.get()\n\t\t.then(snapshot => {\n\t\t\tif (!snapshot.empty) {\n\t\t\t\treturn createGame(null, userId);\n\t\t\t}\n\n\t\t\tconst values = { name };\n\t\t\tif (userId) {\n\t\t\t\tvalues.userIds = firebase.firestore.FieldValue.arrayUnion(userId);\n\t\t\t}\n\n\t\t\treturn gamesCollection.add(values)\n\t\t\t\t.then(() => name);\n\t\t});\n};\n\n/**\n * Inserts a player with no weapon to the given game\n *\n * @param   {firebase.firestore.DocumentReference}  gameDocument\n * @param   {string}                                userId\n */\nexport const addPlayerToGame = (gameDocument, userId) => {\n\tgameDocument.get()\n\t\t.then(snapshot => {\n\t\t\tconst { userIds = [] } = snapshot.data();\n\t\t\tif (userIds.length === 2) {\n\t\t\t\tthrow new Error('Cannot add user to game');\n\t\t\t}\n\n\t\t\tconst values = { userIds: firebase.firestore.FieldValue.arrayUnion(userId) };\n\t\t\tgameDocument.update(values)\n\t\t\t\t.catch(err => console.log(`Error encountered: ${err}`));\n\t\t});\n};\n\n/**\n * Updates a player's weapon\n *\n * @param   {firebase.firestore.DocumentReference}      gameDocument\n * @param   {string}                                    userId\n * @param   {string}                                    weapon\n * @returns {Promise<firebase.firestore.QuerySnapshot>}\n */\nexport const addWeaponToGame = async (gameDocument, userId, weapon) => gameDocument.get()\n\t.then(snapshot => {\n\t\tconst { weapons = [] } = snapshot.data();\n\t\tif (weapons.length === 2) {\n\t\t\tthrow new Error('Cannot add weapon to game');\n\t\t}\n\n\t\tconst values = firebase.firestore.FieldValue.arrayUnion({ userId, weapon });\n\t\treturn gameDocument.update('weapons', values);\n\t});\n\n/**\n * Gets the weapon for the given player\n *\n * @param   {firebase.firestore.DocumentReference}      gameDocument\n * @param   {string}                                    userId\n * @returns {Promise<firebase.firestore.QuerySnapshot>}\n */\nexport const getWeaponForPlayer = async (gameDocument, userId) => gameDocument.get()\n\t.then(snapshot => {\n\t\tconst {\n\t\t\tweapons = [],\n\t\t\tuserIds = []\n\t\t} = snapshot.data();\n\n\t\tif (!userIds.includes(userId)) {\n\t\t\taddPlayerToGame(gameDocument, userId);\n\t\t\treturn null\n\t\t} else {\n\t\t\tconst { weapon = null } = weapons.find(item => item.userId === userId) || {};\n\t\t\treturn weapon;\n\t\t}\n\t});\n\n/**\n * Determines the winner from the document snapshot data\n *\n * @param   {{userId: string, weapon: *}[]}   players\n * @returns {{tie: boolean, userId: *, weapon: *}}\n */\nexport const getWinner = players => {\n\tconst winner = {\n\t\ttie: false,\n\t\tuserId: null,\n\t\tweapon: null\n\t};\n\n\tif (\n\t\tplayers.length < 2\n\t\t|| players.some(({ weapon }) => weapon === null)\n\t) {\n\t\treturn winner;\n\t}\n\n\tconst [aPlayer, bPlayer] = players;\n\n\tif (\n\t\t(aPlayer.weapon === 'Rock' && bPlayer.weapon === 'Scissors')\n\t\t|| (aPlayer.weapon === 'Paper' && bPlayer.weapon === 'Rock')\n\t\t|| (aPlayer.weapon === 'Scissors' && bPlayer.weapon === 'Paper')\n\t) {\n\t\tObject.assign(winner, aPlayer);\n\t} else if (aPlayer.weapon === bPlayer.weapon) {\n\t\twinner.tie = true;\n\t\twinner.weapon = aPlayer.weapon;\n\t} else {\n\t\tObject.assign(winner, bPlayer);\n\t}\n\n\treturn winner;\n};\n\n/**\n * Resets the player's weapons for the given game\n *\n * @param {firebase.firestore.DocumentReference}    gameDocument\n * @param {boolean}                                 tie\n */\nexport const deleteWeapons = (gameDocument, tie = false) => {\n\tconst values = { weapons: firebase.firestore.FieldValue.delete() };\n\n\tif (tie) {\n\t\tvalues.ties = firebase.firestore.FieldValue.increment(1);\n\t}\n\n\tgameDocument.update(values)\n\t\t.catch(err => console.log(`Error encountered: ${err}`));\n};\n\n/**\n * Gets all the games where the given user is a player of\n *\n * @param   {string}                                            userId\n * @returns {Promise<firebase.firestore.DocumentReference[]>}\n */\nexport const getGamesForUser = userId => db.collection('games')\n\t.where('userIds', 'array-contains', userId)\n\t.get()\n\t.then(snapshot => snapshot.docs);\n","import React, {\n\tuseEffect,\n\tuseState\n} from 'react';\nimport DashboardGamesList from './DashboardGamesList';\nimport {\n\tgetGamesForUser,\n\tgetWinner\n} from '../services/game';\n\nfunction Dashboard({ userId }) {\n\tconst [\n\t\tgamesWaitingForOpponent,\n\t\tsetGamesWaitingForOpponent\n\t] = useState([]);\n\n\tconst [\n\t\tgamesWaitingForOpponentMove,\n\t\tsetGamesWaitingForOpponentMove\n\t] = useState([]);\n\n\tconst [\n\t\tgamesWaitingForYourMove,\n\t\tsetGamesWaitingForYourMove\n\t] = useState([]);\n\n\tconst [\n\t\tstats,\n\t\tsetStats\n\t] = useState({ wins: 0, ties: 0, losses: 0 });\n\n\tuseEffect(() => {\n\t\tif (!userId) {\n\t\t\treturn;\n\t\t}\n\n\t\tgetGamesForUser(userId).then(handleGameUpdates);\n\t\t// eslint-disable-next-line\n\t}, [userId]);\n\n\tconst handleGameUpdates = snapshots => {\n\t\tconst newGamesWaitingForOpponent = [...gamesWaitingForOpponent];\n\t\tconst newGamesWaitingForOpponentMove = [...gamesWaitingForOpponentMove];\n\t\tconst newGamesWaitingForYourMove = [...gamesWaitingForYourMove];\n\t\tconst newStats = Object.assign({}, stats);\n\n\t\tsnapshots.forEach(snapshot => {\n\t\t\tconst {\n\t\t\t\tname,\n\t\t\t\tties = 0,\n\t\t\t\tuserIds = [],\n\t\t\t\tweapons = []\n\t\t\t} = snapshot.data();\n\n\t\t\tif (userIds.length < 2) {\n\t\t\t\tnewGamesWaitingForOpponent.push(name);\n\t\t\t} else {\n\t\t\t\tconst index = newGamesWaitingForOpponent.indexOf(name);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tnewGamesWaitingForOpponent.splice(index, 1);\n\t\t\t\t}\n\n\t\t\t\tconst winner = getWinner(weapons);\n\n\t\t\t\tif (\n\t\t\t\t\twinner.userId === null\n\t\t\t\t\t&& winner.tie === false\n\t\t\t\t) {\n\t\t\t\t\tconst { weapon } = weapons.find(item => item.userId === userId) || {};\n\t\t\t\t\tweapon\n\t\t\t\t\t\t? newGamesWaitingForOpponentMove.push(name)\n\t\t\t\t\t\t: newGamesWaitingForYourMove.push(name);\n\t\t\t\t} else {\n\t\t\t\t\tconst opponentIndex = newGamesWaitingForOpponentMove.indexOf(name);\n\t\t\t\t\tconst yourIndex = newGamesWaitingForYourMove.indexOf(name);\n\t\t\t\t\tif (opponentIndex >= 0) {\n\t\t\t\t\t\tnewGamesWaitingForOpponentMove.splice(opponentIndex, 1);\n\t\t\t\t\t} else if (yourIndex >= 0) {\n\t\t\t\t\t\tnewGamesWaitingForYourMove.splice(yourIndex, 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (winner.userId === userId) {\n\t\t\t\t\t\tnewStats.wins++;\n\t\t\t\t\t} else if (!winner.tie && winner.userId !== null) {\n\t\t\t\t\t\tnewStats.losses++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnewStats.ties = ties;\n\t\t\t}\n\t\t});\n\n\t\tsetGamesWaitingForOpponent(newGamesWaitingForOpponent);\n\t\tsetGamesWaitingForOpponentMove(newGamesWaitingForOpponentMove);\n\t\tsetGamesWaitingForYourMove(newGamesWaitingForYourMove);\n\t\tsetStats(newStats);\n\t};\n\n\treturn (\n\t\t<div className=\"row\">\n\t\t\t<div className=\"col-sm-8 offset-sm-2\">\n\t\t\t\t<div className=\"card\">\n\t\t\t\t\t<div className=\"card-header\">Dashboard</div>\n\t\t\t\t\t<div className=\"card-body\">\n\t\t\t\t\t\t<h5 className=\"card-title\">Your Stats</h5>\n\t\t\t\t\t\t<p className=\"card-text\"><span className=\"strong\">Wins:</span> {stats.wins}</p>\n\t\t\t\t\t\t<p className=\"card-text\"><span className=\"strong\">Ties:</span> {stats.ties}</p>\n\t\t\t\t\t\t<p className=\"card-text\"><span className=\"strong\">Losses:</span> {stats.losses}</p>\n\n\t\t\t\t\t\t<DashboardGamesList title=\"Waiting for an opponent...\" games={ gamesWaitingForOpponent } />\n\t\t\t\t\t\t<DashboardGamesList title=\"Waiting for opponent's move...\" games={ gamesWaitingForOpponentMove } />\n\t\t\t\t\t\t<DashboardGamesList title=\"Waiting for your move...\" games={ gamesWaitingForYourMove } />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Dashboard;\n","export const areObjectsSame = (objectA, objectB) => {\n\tif (!(objectA instanceof Object && objectB instanceof Object)) {\n\t\treturn false;\n\t}\n\n\tconst keys = Object.keys(objectA);\n\tif (keys.length !== Object.keys(objectB).length) {\n\t\treturn false\n\t}\n\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tconst key = keys[i];\n\t\tif (objectA[key] !== objectB[key]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n};\n\nexport const areArraysSame = (arrayA, arrayB) => {\n\tif (\n\t\t!(arrayA instanceof Array && arrayB instanceof Array)\n\t\t|| arrayA.length !== arrayB.length\n\t) {\n\t\treturn false;\n\t}\n\n\tconst arrayASorted = arrayA.slice(0).sort();\n\tconst arrayBSorted = arrayB.slice(0).sort();\n\n\tfor (let i = 0; i < arrayASorted.length; i++) {\n\t\tconst itemA = arrayASorted[i];\n\t\tconst itemB = arrayBSorted[i];\n\n\t\tif (\n\t\t\t!(\n\t\t\t\t(\n\t\t\t\t\titemA instanceof Object\n\t\t\t\t\t&& areObjectsSame(itemA, itemB)\n\t\t\t\t) || (\n\t\t\t\t\titemA instanceof Array\n\t\t\t\t\t&& areArraysSame(itemA, itemB)\n\t\t\t\t) || (\n\t\t\t\t\titemA === itemB\n\t\t\t\t)\n\t\t\t)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n};\n","import React, {\n\tuseEffect,\n\tuseState\n} from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n\taddWeaponToGame,\n\tdeleteWeapons,\n\tgetWeaponForPlayer,\n\tgetWinner\n} from '../services/game';\nimport { areObjectsSame } from '../services/utils';\n\nfunction Game({ gameDocument, players, userId }) {\n\tconst [\n\t\tweapon,\n\t\tsetWeapon\n\t] = useState(null);\n\n\tconst [\n\t\twinner,\n\t\tsetWinner\n\t] = useState({});\n\n\tuseEffect(() => {\n\t\tgetWeaponForPlayer(gameDocument, userId)\n\t\t\t.then(weapon => setWeapon(weapon));\n\t}, [gameDocument, userId]);\n\n\tuseEffect(() => {\n\t\tconst gameWinner = getWinner(players);\n\n\t\tif (!areObjectsSame(gameWinner, winner)) {\n\t\t\tsetWinner(gameWinner);\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [players]);\n\n\tconst getPlayerNamesCopy = () => players.map(player => player.name).join(' vs. ');\n\n\tconst getOpponentName = () => players.find(player => player.userId !== winner.userId).name;\n\n\tconst getWeaponIcon = weapon => {\n\t\tlet className = '';\n\n\t\tswitch (weapon) {\n\t\t\tcase 'Rock':\n\t\t\t\tclassName = 'fas fa-hand-rock';\n\t\t\t\tbreak;\n\t\t\tcase 'Paper':\n\t\t\t\tclassName = 'fas fa-hand-paper';\n\t\t\t\tbreak;\n\t\t\tcase 'Scissors':\n\t\t\t\tclassName = 'fas fa-hand-scissors';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\n\t\treturn <i className={ className }></i>;\n\t};\n\n\tconst onClickWeaponHandler = e => {\n\t\tconst weapon = e.currentTarget.dataset.name;\n\n\t\taddWeaponToGame(gameDocument, userId, weapon)\n\t\t\t.then(() => setWeapon(weapon));\n\t};\n\n\tif (winner.tie) {\n\t\tsetTimeout(() => {\n\t\t\tdeleteWeapons(gameDocument, true);\n\t\t\tsetWeapon(null);\n\t\t\tsetWinner({});\n\t\t}, 3000);\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<h5 className=\"card-title\">{ getPlayerNamesCopy() }</h5>\n\t\t\t\t<p className=\"card-text\">It was a tie! Both selected <span className=\"text-primary\">{ getWeaponIcon(winner.weapon) }</span>. Starting a new match...</p>\n\t\t\t</>\n\t\t);\n\t}\n\n\tif (winner.userId) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<h5 className=\"card-title\">\n\t\t\t\t\t{ winner.userId === userId\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t`Congrats, you beat ${getOpponentName()} with `,\n\t\t\t\t\t\t\t<span className=\"text-primary\" key={ weapon }>{ getWeaponIcon(weapon) }</span>,\n\t\t\t\t\t\t\t'!'\n\t\t\t\t\t\t]\n\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t`Sorry, ${winner.name} won with `,\n\t\t\t\t\t\t\t<span className=\"text-primary\" key={ weapon }>{ getWeaponIcon(winner.weapon) }</span>,\n\t\t\t\t\t\t\t'.'\n\t\t\t\t\t\t] }\n\t\t\t\t</h5>\n\t\t\t\t<Link to=\"/home\" className=\"btn btn-primary btn-block\">Play again?</Link>\n\t\t\t</>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<h5 className=\"card-title\">{ getPlayerNamesCopy() }</h5>\n\t\t\t{ weapon\n\t\t\t\t? <p className=\"card-text\">\n\t\t\t\t\tYou chose <span className=\"text-primary\">{ getWeaponIcon(weapon) }</span>!\n\t\t\t\t\t<br/>\n\t\t\t\t\tWaiting for your opponent...\n\t\t\t\t</p>\n\t\t\t\t: <>\n\t\t\t\t\t<p className=\"card-text\">Choose your weapon!</p>\n\t\t\t\t\t<div className=\"btn-group d-flex\">\n\t\t\t\t\t\t{ ['Rock', 'Paper', 'Scissors'].map(weapon => (\n\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-outline-primary\" style={{ flexGrow: 1 }} data-name={ weapon } onClick={ onClickWeaponHandler } key={ weapon }>\n\t\t\t\t\t\t\t\t{ getWeaponIcon(weapon) }\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)) }\n\t\t\t\t\t</div>\n\t\t\t\t</> }\n\t\t</>\n\t);\n}\n\nexport default Game;\n","import db from './db';\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\n\n/**\n * Inserts a user to the users collection\n *\n * @param   {object}                                        user\n * @returns {Promise<firebase.firestore.DocumentReference>}\n */\nexport const addUser = async user => {\n\tconst usersCollection = db.collection('users');\n\n\treturn usersCollection.where('email', '==', user.email)\n\t\t.get()\n\t\t.then(snapshot => {\n\t\t\tif (snapshot.empty) {\n\t\t\t\treturn usersCollection.add(user)\n\t\t\t\t\t.then(document => {\n\t\t\t\t\t\tuser.id = document.id;\n\t\t\t\t\t\treturn user;\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst userDocument = snapshot.docs[0].ref;\n\t\t\treturn userDocument.update(user)\n\t\t\t\t.then(() => {\n\t\t\t\t\tuser.id = userDocument.id;\n\t\t\t\t\treturn user;\n\t\t\t\t});\n\t\t});\n};\n\n/**\n * Gets the data for the given user\n *\n * @param   {string}                                    userId\n * @returns {Promise<firebase.firestore.DocumentData>}\n */\nexport const getUser = async userId => db.collection('users')\n\t.doc(userId)\n\t.get()\n\t.then(snapshot => snapshot.data());\n\n/**\n * Sign in user with Google\n */\nexport const signInGoogle = () => {\n\tfirebase.auth()\n\t\t.setPersistence(firebase.auth.Auth.Persistence.LOCAL)\n\t\t.then(() => {\n\t\t\tconst provider = new firebase.auth.GoogleAuthProvider();\n\t\t\treturn firebase.auth().signInWithRedirect(provider);\n\t\t});\n};\n\n/**\n * Sign in user with Email.\n * This sends a verification email.\n *\n * @param {{ email: string, name: string }} user\n */\nexport const signInEmail = user => {\n\tfirebase.auth()\n\t\t.setPersistence(firebase.auth.Auth.Persistence.LOCAL)\n\t\t.then(() => {\n\t\t\tconst actionCodeSettings = {\n\t\t\t\turl: process.env.ENVIRONMENT === 'production'\n\t\t\t\t\t? 'https://iamkevinlowe.github.io/react-rps'\n\t\t\t\t\t: 'http://localhost:3000',\n\t\t\t\thandleCodeInApp: true\n\t\t\t};\n\n\t\t\tfirebase.auth()\n\t\t\t\t.sendSignInLinkToEmail(user.email, actionCodeSettings)\n\t\t\t\t.then(() => window.localStorage.setItem('userForSignInEmail', JSON.stringify(user)));\n\t\t});\n};\n\n/**\n * Checks for an authorized user from an email link\n *\n * @returns {Promise<boolean>}\n */\nexport const checkUserFromEmailLink = () => {\n\tif (firebase.auth().isSignInWithEmailLink(window.location.href)) {\n\t\ttry {\n\t\t\tconst { email, name } = JSON.parse(window.localStorage.getItem('userForSignInEmail'));\n\t\t\tif (!email || !name) {\n\t\t\t\tthrow new Error('Email and Name not found in local storage');\n\t\t\t}\n\n\t\t\tfirebase.auth()\n\t\t\t\t.signInWithEmailLink(email, window.location.href)\n\t\t\t\t.then(({ user }) => {\n\t\t\t\t\twindow.localStorage.removeItem('userForSignInEmail');\n\t\t\t\t\tuser && addUser({\n\t\t\t\t\t\temail: user.email || email,\n\t\t\t\t\t\tname: name || user.displayName,\n\t\t\t\t\t\tuid: user.uid\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\twindow.localStorage.removeItem('userForSignInEmail');\n\t\t}\n\t\treturn Promise.resolve(true);\n\t}\n\n\treturn Promise.resolve(false);\n};\n\n/**\n * Sets a listener for the auth state and executes the success handler\n *\n * @param   {function}              successHandler\n * @returns {firebase.Unsubscribe}\n */\nexport const setAuthListener = successHandler => firebase.auth()\n\t.onAuthStateChanged(user => {\n\t\tif (user) {\n\t\t\tdb.collection('users')\n\t\t\t\t.where('uid', '==', user.uid)\n\t\t\t\t.get()\n\t\t\t\t.then(snapshot => {\n\t\t\t\t\tconst authUser = {\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\tuid: user.uid\n\t\t\t\t\t};\n\n\t\t\t\t\tif (snapshot.empty) {\n\t\t\t\t\t\treturn addUser(authUser);\n\t\t\t\t\t}\n\n\t\t\t\t\tauthUser.id = snapshot.docs[0].ref.id;\n\t\t\t\t\treturn authUser;\n\t\t\t\t}).then(successHandler);\n\t\t} else {\n\t\t\tsuccessHandler();\n\t\t}\n\t});\n\n/**\n * Logs the current user out\n */\nexport const logout = () => firebase.auth().signOut();\n","import React, {\n\tuseEffect,\n\tuseState,\n} from 'react';\nimport {\n\tRedirect,\n\tuseParams\n} from 'react-router-dom';\nimport Game from './Game';\nimport {\n\taddPlayerToGame,\n\tgetGameDocument\n} from '../services/game';\nimport { getUser } from '../services/user';\nimport { areArraysSame } from '../services/utils';\n\nfunction GameLobby({ userId }) {\n\tconst { gameName } = useParams();\n\n\tconst [\n\t\tgameDocument,\n\t\tsetGameDocument\n\t] = useState(null);\n\n\tconst [\n\t\tplayers,\n\t\tsetPlayers\n\t] = useState([]);\n\n\tconst [\n\t\tredirectTo,\n\t\tsetRedirectTo\n\t] = useState(null);\n\n\tuseEffect(() => {\n\t\tlet cleanup = null;\n\n\t\tgetGameDocument(gameName).then(gameDocument => {\n\t\t\tsetGameDocument(gameDocument);\n\n\t\t\tcleanup = gameDocument.onSnapshot(snapshot => {\n\t\t\t\tconst { name, userIds = [], weapons = [] } = snapshot.data();\n\t\t\t\tif (name !== gameName) {\n\t\t\t\t\tsetRedirectTo(`/game/${name}`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!userIds.includes(userId)) {\n\t\t\t\t\tif (userIds.length >= 2) {\n\t\t\t\t\t\tsetRedirectTo('/home');\n\t\t\t\t\t} else {\n\t\t\t\t\t\taddPlayerToGame(gameDocument, userId);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst playersPromises = userIds.map(userId => getUser(userId)\n\t\t\t\t\t.then(user => {\n\t\t\t\t\t\tconst { weapon = null } = weapons.find(item => item.userId === userId) || {};\n\t\t\t\t\t\tuser.userId = userId;\n\t\t\t\t\t\tuser.weapon = weapon;\n\t\t\t\t\t\treturn user;\n\t\t\t\t\t}));\n\n\t\t\t\tPromise.all(playersPromises)\n\t\t\t\t\t.then(gamePlayers => {\n\t\t\t\t\t\tif (!areArraysSame(gamePlayers, players)) {\n\t\t\t\t\t\t\tsetPlayers(gamePlayers);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\treturn () => cleanup && cleanup();\n\t\t// eslint-disable-next-line\n\t}, [gameName, userId]);\n\n\tif (redirectTo) {\n\t\treturn <Redirect to={ redirectTo } />;\n\t}\n\n\treturn (\n\t\t<div className=\"row\">\n\t\t\t<div className=\"col-sm-8 offset-sm-2\">\n\t\t\t\t<div className=\"card\">\n\t\t\t\t\t<div className=\"card-header\">{ gameName }</div>\n\t\t\t\t\t<div className=\"card-body\">\n\t\t\t\t\t\t{ players.length < 2\n\t\t\t\t\t\t\t? <h5 className=\"card-title\">Waiting for player...</h5>\n\t\t\t\t\t\t\t: <Game gameDocument={ gameDocument } players={ players } userId={ userId } /> }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default GameLobby;\n","import React, {\n\tuseState\n} from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { createGame } from '../services/game';\n\nfunction GameNew({ userId }) {\n\tconst [\n\t\tgameName,\n\t\tsetGameName\n\t] = useState(null);\n\n\tconst onClickHostHandler = () => createGame(null, userId).then(setGameName);\n\n\tconst onSubmitJoinHandler = e => {\n\t\te.preventDefault();\n\n\t\tconst gameName = e.target.elements.name.value.trim();\n\t\tsetGameName(gameName);\n\t};\n\n\tif (gameName) {\n\t\treturn <Redirect to={`/game/${gameName}`} />;\n\t}\n\n\treturn (\n\t\t<div className=\"card\">\n\t\t\t<div className=\"card-body\">\n\t\t\t\t<p className=\"card-text\">Decide if you want to start a new game, or join an existing one</p>\n\t\t\t\t<button className=\"btn btn-primary btn-block mb-3\" onClick={ onClickHostHandler }>Start a new game</button>\n\n\t\t\t\t<hr/>\n\n\t\t\t\t<form className=\"form-inline\" onSubmit={ onSubmitJoinHandler }>\n\t\t\t\t\t<div className=\"input-group w-100\">\n\t\t\t\t\t\t<input type=\"text\" className=\"form-control\" name=\"name\" placeholder=\"Game Name\"/>\n\t\t\t\t\t\t<div className=\"input-group-append\">\n\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary\">Join a game</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default GameNew;\n","import React, {\n\tuseEffect,\n\tuseState\n} from 'react';\nimport { signInEmail } from '../../services/user';\n\nfunction EmailPassword() {\n\tconst [\n\t\tisPendingEmailLinkSent,\n\t\tsetIsPendingEmailLinkSent\n\t] = useState(false);\n\n\tconst [\n\t\tshowEmailSentCopy,\n\t\tsetShowEmailSentCopy\n\t] = useState(false);\n\n\tuseEffect(() => {\n\t\tif (window.localStorage.hasOwnProperty('userForSignInEmail')) {\n\t\t\tsetIsPendingEmailLinkSent(true);\n\t\t}\n\t}, []);\n\n\tconst onClickResendHandler = e => {\n\t\tlet user = null;\n\t\ttry {\n\t\t\tuser = JSON.parse(window.localStorage.getItem('userForSignInEmail'));\n\t\t} catch (error) {\n\t\t\tconsole.log('User corrupted in local storage');\n\t\t\twindow.localStorage.removeItem('userForSignInEmail');\n\t\t}\n\n\t\tif (user) {\n\t\t\tsignInEmail(user);\n\t\t\tsetShowEmailSentCopy(true);\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetShowEmailSentCopy(false);\n\t\t\t}, 3000);\n\t\t} else {\n\t\t\tsetIsPendingEmailLinkSent(false);\n\t\t}\n\t};\n\n\tconst onSubmitFormHandler = e => {\n\t\te.preventDefault();\n\n\t\tconst name = e.target.elements.name.value.trim();\n\t\tconst email = e.target.elements.email.value.trim().toLowerCase();\n\n\t\tif (!name || !email) {\n\t\t\treturn;\n\t\t}\n\n\t\tsignInEmail({ name, email });\n\t\tsetIsPendingEmailLinkSent(true);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<hr/>\n\n\t\t\t{ isPendingEmailLinkSent\n\t\t\t\t? <>\n\t\t\t\t\t<p className=\"card-text\">{ showEmailSentCopy ? 'Verification email sent...' : 'Waiting for email verification...' }</p>\n\t\t\t\t\t<button className=\"btn btn-link\" onClick={ onClickResendHandler }>Click here to resend verification email</button>\n\t\t\t\t</>\n\t\t\t\t: <form onSubmit={ onSubmitFormHandler }>\n\t\t\t\t\t<div className=\"form-row form-group\">\n\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t<input type=\"text\" className=\"form-control\" name=\"name\" placeholder=\"Your Name\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t<input type=\"email\" className=\"form-control\" name=\"email\" placeholder=\"Your Email\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button type=\"submit\" className=\"btn btn-outline-primary btn-block\">\n\t\t\t\t\t\t<span className=\"float-left\"><i className=\"far fa-envelope\"></i></span>\n\t\t\t\t\t\tSign in with Email\n\t\t\t\t\t</button>\n\t\t\t\t</form> }\n\t\t</>\n\t);\n}\n\nexport default EmailPassword;\n","import React from 'react';\nimport { signInGoogle } from '../../services/user';\n\nfunction Google() {\n\tconst onClickGoogleHandler = e => {\n\t\tsignInGoogle();\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<hr/>\n\n\t\t\t<button className=\"btn btn-outline-secondary btn-block\" onClick={ onClickGoogleHandler }>\n\t\t\t\t<span className=\"float-left\"><i className=\"fab fa-google\"></i></span>\n\t\t\t\tSign in with Google\n\t\t\t</button>\n\t\t</>\n\t);\n}\n\nexport default Google;\n","import React from 'react';\nimport EmailPassword from './EmailPassword';\nimport Google from './Google';\n\nfunction UserNew() {\n\treturn (\n\t\t<div className=\"card\">\n\t\t\t<div className=\"card-body\">\n\t\t\t\t<h5 className=\"card-title\">New phone, who dis?</h5>\n\t\t\t\t<p className=\"card-text\">Before we begin, I need to know who you are</p>\n\n\t\t\t\t<EmailPassword/>\n\t\t\t\t<Google/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default UserNew;\n","import React from 'react';\nimport {\n\tRedirect,\n\tuseLocation,\n} from 'react-router-dom';\nimport GameNew from './GameNew';\nimport UserNew from './UserNew/UserNew';\n\nfunction Home({ userId }) {\n\tconst searchParams = new URLSearchParams(useLocation().search);\n\tconst redirectTo = searchParams.get('redirectTo');\n\n\tif (userId && redirectTo) {\n\t\treturn <Redirect to={ redirectTo }/>;\n\t}\n\n\treturn (\n\t\t<div className=\"row\">\n\t\t\t<div className=\"col-sm-8 offset-sm-2\">\n\t\t\t\t{ userId\n\t\t\t\t\t? <GameNew userId={ userId } />\n\t\t\t\t\t: <UserNew/> }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Home;\n","import React from 'react';\nimport {\n\tLink,\n\tuseRouteMatch\n} from 'react-router-dom';\nimport { logout } from '../services/user';\n\nfunction Navbar({ userId }) {\n\tconst dashboardMatch = useRouteMatch({\n\t\tpath: '/dashboard',\n\t\tstrict: true\n\t});\n\tconst homeMatch = useRouteMatch({\n\t\tpath: '/home',\n\t\tstrict: true\n\t});\n\n\tconst onClickDashboardHandler = e => {\n\t\tif (!userId) {\n\t\t\te.preventDefault();\n\t\t}\n\t};\n\n\tconst getDashboardClassNames = () => {\n\t\tconst classNames = ['nav-link'];\n\n\t\tif (dashboardMatch) {\n\t\t\tclassNames.push('active');\n\t\t}\n\n\t\tif (!userId) {\n\t\t\tclassNames.push('disabled');\n\t\t}\n\n\t\treturn classNames.join(' ');\n\t};\n\n\tconst onClickSignOutHandler = e => {\n\t\te.preventDefault();\n\n\t\tlogout();\n\t};\n\n\treturn (\n\t\t<ul className=\"nav nav-pills mt-3 mb-5\">\n\t\t\t<li className=\"nav-item\">\n\t\t\t\t<Link className={ `nav-link${homeMatch ? ' active' : ''}` } to=\"/home\">Home</Link>\n\t\t\t</li>\n\t\t\t<li className=\"nav-item\">\n\t\t\t\t<Link className={ getDashboardClassNames() } onClick={ onClickDashboardHandler } to=\"/dashboard\">Dashboard</Link>\n\t\t\t</li>\n\n\t\t\t{ userId\n\t\t\t\t? <li className=\"nav-item ml-auto\">\n\t\t\t\t\t<button className=\"btn btn-link nav-link\" onClick={ onClickSignOutHandler }>Sign Out</button>\n\t\t\t\t</li>\n\t\t\t\t: null }\n\t\t</ul>\n\t);\n}\n\nexport default Navbar;\n","import React from 'react';\nimport {\n\tRedirect,\n\tRoute\n} from 'react-router-dom';\n\nfunction PrivateRoute({ children, userId, ...rest }) {\n\treturn <Route\n\t\t{...rest}\n\t\trender={({ location }) => userId\n\t\t\t? children\n\t\t\t: <Redirect to={ `/home?redirectTo=${location.pathname}` } />\n\t\t} />;\n}\n\nexport default PrivateRoute;\n","import React, {\n\tuseEffect,\n\tuseState\n} from 'react';\nimport {\n\tHashRouter as Router,\n\tRedirect,\n\tRoute,\n\tSwitch\n} from 'react-router-dom';\nimport Dashboard from './Dashboard';\nimport GameLobby from './GameLobby';\nimport Home from './Home';\nimport Navbar from './Navbar';\nimport PrivateRoute from './PrivateRoute';\nimport { checkUserFromEmailLink, setAuthListener } from '../services/user';\nimport 'bootstrap/scss/bootstrap.scss';\nimport '@fortawesome/fontawesome-pro/css/all.css';\n\nfunction App() {\n\tconst [\n\t\tisLoading,\n\t\tsetIsLoading\n\t] = useState(true);\n\n\tconst [\n\t\tuser,\n\t\tsetUser\n\t] = useState({});\n\n\tuseEffect(() => setAuthListener((user = {}) => {\n\t\tisLoading && setIsLoading(false);\n\t\tsetUser(user);\n\t\tif (!user.id) {\n\t\t\tcheckUserFromEmailLink().then(result => {\n\t\t\t\tif (result) {\n\t\t\t\t\tconst continueUrl = new URLSearchParams(window.location.search).get('continueUrl');\n\t\t\t\t\twindow.history.replaceState({}, document.title, continueUrl);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// eslint-disable-next-line\n\t}), []);\n\n\treturn (\n\t\tisLoading\n\t\t\t? <div className=\"vh-100 d-flex justify-content-center align-items-center\">\n\t\t\t\t<h5 className=\"align-self-center\">Loading...</h5>\n\t\t\t</div>\n\t\t\t: <Router>\n\t\t\t\t<Navbar userId={ user.id } />\n\n\t\t\t\t<Switch>\n\t\t\t\t\t<Redirect exact from=\"/\" to=\"/home\" />\n\n\t\t\t\t\t<PrivateRoute path=\"/game/:gameName\" userId={ user.id }>\n\t\t\t\t\t\t<GameLobby userId={ user.id } />\n\t\t\t\t\t</PrivateRoute>\n\t\t\t\t\t<PrivateRoute path=\"/dashboard\" userId={ user.id }>\n\t\t\t\t\t\t<Dashboard userId={ user.id } />\n\t\t\t\t\t</PrivateRoute>\n\n\t\t\t\t\t<Route path=\"/home\">\n\t\t\t\t\t\t<Home userId={ user.id } />\n\t\t\t\t\t</Route>\n\t\t\t\t</Switch>\n\t\t\t</Router>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}